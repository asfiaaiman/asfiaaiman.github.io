(() => { "use strict"; $("#countryId,#stateId,#cityId,#language").select2({ width: "100%" }), $("#changeLanguageModal").on("shown.bs.modal", (function () { $(document).off("focusin.modal") })), $(document).on("submit", "#changePasswordForm", (function (e) { if (e.preventDefault(), !function () { var e = $("#pfCurrentPassword").val().trim(), a = $("#pfNewPassword").val().trim(), t = $("#pfNewConfirmPassword").val().trim(); if ("" == e || "" == a || "" == t) return $("#editPasswordValidationErrorsBox").show().html("Please fill all the required fields."), !1; return !0 }()) return !1; var a = jQuery(this).find("#btnPrPasswordEditSave"); a.button("loading"), $.ajax({ url: route("change.password"), type: "post", data: new FormData($(this)[0]), processData: !1, contentType: !1, success: function (e) { e.success && ($("#changePasswordModal").modal("hide"), displaySuccessMessage(e.message)) }, error: function (e) { displayErrorMessage(e.responseJSON.message) }, complete: function () { a.button("reset") } }) })), $("#changePasswordModal").on("hidden.bs.modal", (function () { resetModalForm("#changePasswordForm", "#editValidationErrorsBox") })), $(document).on("click", ".edit-profile", (function (e) { var a = $(e.currentTarget).attr("data-id"); renderProfileData(a) })), window.renderProfileData = function (e) { $.ajax({ url: route("edit-profile", e), type: "GET", success: function (e) { e.success && ($("#pfName").val(e.data.first_name), $("#plName").val(e.data.last_name), $("#previewImage").attr("src", e.data.profile_image), $("#pfEmail").val(e.data.email)) } }) }, $(document).on("change", "#profileImage", (function () { isValidImage($(this), "#validationErrorsBox") && displayImage(this, "#previewImage"), $("#validationErrorsBox").delay(3e3).slideUp(300) })), $(document).on("submit", "#editProfileForm", (function (e) { e.preventDefault(); var a = jQuery(this).find("#btnPrEditSave"); a.button("loading"), $.ajax({ url: route("update-profile"), type: "post", data: new FormData($(this)[0]), processData: !1, contentType: !1, success: function (e) { e.success && ($("#editProfileModal").modal("hide"), displaySuccessMessage(e.message), setTimeout((function () { location.reload() }), 1500)) }, error: function (e) { a.button("reset"), displayErrorMessage(e.responseJSON.message) }, complete: function () { a.button("reset") } }) })), $(document).on("submit", "#changeLanguageForm", (function (e) { e.preventDefault(); var a = jQuery(this).find("#btnLanguageChange"); a.button("loading"), $.ajax({ url: route("update.language"), type: "post", data: new FormData($(this)[0]), processData: !1, contentType: !1, success: function (e) { console.log(e), location.reload() }, error: function (e) { manageAjaxErrors(e, "editProfileValidationErrorsBox"), a.button("reset") }, complete: function () { a.button("reset") } }) })), $(document).on("click", ".changeType", (function () { var e = $(this).parent().siblings(); "password" == e.attr("type") ? ($(this).children().addClass("fa-eye"), $(this).children().removeClass("fa-eye-slash"), e.attr("type", "text")) : ($(this).children().removeClass("fa-eye"), $(this).children().addClass("fa-eye-slash"), e.attr("type", "password")) })) })();
